<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>github-info.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="GithubReleaseNotes.html">GithubReleaseNotes</a><ul class='methods'><li data-type='method'><a href="GithubReleaseNotes.html#changelog">changelog</a></li><li data-type='method'><a href="GithubReleaseNotes.html#init">init</a></li><li data-type='method'><a href="GithubReleaseNotes.html#release">release</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#clearTasks">clearTasks</a></li><li><a href="global.html#commitMessages">commitMessages</a></li><li><a href="global.html#compareIssueLabels">compareIssueLabels</a></li><li><a href="global.html#convertStringToArray">convertStringToArray</a></li><li><a href="global.html#createChangelog">createChangelog</a></li><li><a href="global.html#createRelease">createRelease</a></li><li><a href="global.html#createReleaseRanges">createReleaseRanges</a></li><li><a href="global.html#dashToCamelCase">dashToCamelCase</a></li><li><a href="global.html#editRelease">editRelease</a></li><li><a href="global.html#executeCommand">executeCommand</a></li><li><a href="global.html#formatDate">formatDate</a></li><li><a href="global.html#generateCommitsBody">generateCommitsBody</a></li><li><a href="global.html#generateOptions">generateOptions</a></li><li><a href="global.html#generateReleaseDatesChangelogBody">generateReleaseDatesChangelogBody</a></li><li><a href="global.html#getBashOptions">getBashOptions</a></li><li><a href="global.html#getClosedIssues">getClosedIssues</a></li><li><a href="global.html#getCommitBlocks">getCommitBlocks</a></li><li><a href="global.html#getCommitsBetweenTwo">getCommitsBetweenTwo</a></li><li><a href="global.html#getConfigFromFile">getConfigFromFile</a></li><li><a href="global.html#getIssueBlocks">getIssueBlocks</a></li><li><a href="global.html#getLastTags">getLastTags</a></li><li><a href="global.html#getLastTwoReleases">getLastTwoReleases</a></li><li><a href="global.html#getListReleases">getListReleases</a></li><li><a href="global.html#getReleaseDates">getReleaseDates</a></li><li><a href="global.html#getSelectedTags">getSelectedTags</a></li><li><a href="global.html#getTagDates">getTagDates</a></li><li><a href="global.html#hasNetwork">hasNetwork</a></li><li><a href="global.html#isInRange">isInRange</a></li><li><a href="global.html#prepareRelease">prepareRelease</a></li><li><a href="global.html#printTask">printTask</a></li><li><a href="global.html#repo">repo</a></li><li><a href="global.html#requireConfig">requireConfig</a></li><li><a href="global.html#sortReleasesByDate">sortReleasesByDate</a></li><li><a href="global.html#task">task</a></li><li><a href="global.html#templateBlock">templateBlock</a></li><li><a href="global.html#templateChangelog">templateChangelog</a></li><li><a href="global.html#templateCommits">templateCommits</a></li><li><a href="global.html#templateIssue">templateIssue</a></li><li><a href="global.html#templateIssueBody">templateIssueBody</a></li><li><a href="global.html#templateLabels">templateLabels</a></li><li><a href="global.html#token">token</a></li><li><a href="global.html#user">user</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">github-info.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

var exec = require('child_process').exec;
var chalk = require('chalk');
var Promise = Promise || require('es6-promise').Promise;

/**
* Execute a command in the bash and run a callback
*
* @since 0.5.0
* @private
*
* @param  {string}   command The command to execute
* @param  {Function} callback The callback which returns the stdout
*
* @return {Promise}
*/
function executeCommand(command, callback) {
    return new Promise(function(resolve, reject) {
        exec(command, function(err, stdout, stderr) {
            if (err || stderr) {
                reject(err || stderr);
            } else {
                resolve(stdout.replace('\n', ''));
            }
        });
    })
    .then(callback)
    .catch(function(error) {
        throw new Error(chalk.red(error) + chalk.yellow('Make sure you\'re running the command from the repo folder, or you using the --username and --repo flags.'));
    });
}

/**
* Get user informations
*
* @since 0.5.0
* @public
*
* @param  {Function} callback
*
* @return {Promise} The promise that resolves user informations ({ user: username})
*/
function user(callback) {
    return executeCommand('git config user.name', function(user) {
        return {
            user: user
        };
    })
    .then(callback);
}

/**
* Get repo informations
*
* @since 0.5.0
* @public
*
* @param  {Function} callback
*
* @return {Promise} The promise that resolves repo informations ({user: user, name: name})
*/
function repo(callback) {
    return executeCommand('git config remote.origin.url', function(repo) {
        var repoPath = repo
        .replace(/([^:]*:)|\.[^.]+$/g, '')
        .split('/');
        var user = repoPath[0];
        var name = repoPath[1];

        return {
            username: user,
            repo: name
        };
    })
    .then(callback);
}

/**
* Get token informations
*
* @since 0.5.0
* @public
*
* @param  {Function} callback
*
* @return {Promise} The promise that resolves token informations ({token: token})
*/
function token(callback) {
    return executeCommand('echo $GREN_GITHUB_TOKEN', function(token) {
        return {
            token: token
        };
    })
    .then(callback);
}

module.exports = {
    user: user,
    repo: repo,
    token: token
};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sat Mar 11 2017 22:46:04 GMT+0000 (GMT) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
